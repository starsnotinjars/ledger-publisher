const platforms = [
  'bilibili',
  'blogger',
  'blogspot',
  'craigslist',
  'ello',
  'facebook',
  'github',
  'imgur',
  'instagram',
  'linkedin',
  'livejournal',
  'medium',
  'nextdoor',
  'pinterest',
  'quora',
  'slack',
  'stackoverflow',
  'twitter',
  'vk',
  'xvideos',
  'youku',
  'youtube'
]

const platformsSLD = [
  '1111.com.tw',
  '123456790.com',
  '17k.com',
  '17track.net',
  '1movies.tv',
  '2ch.net',
  '35photo.ru',
  '36kr.com',
  '3dhubs.com',
  '40defiebre.com',
  '4cdn.org',
  '4chan.org',
  '500px.com',
  '51auto.com',
  '52pk.com',
  '61.com.tw',
  '7-themes.com',
  '95516.com',
  '99entranceexam.in',
  '9gag.com',
  'abeautifulmess.com',
  'academia.edu',
  'acquia.com',
  'adbooth.com',
  'addthis.com',
  'addtoany.com',
  'adikteev.com',
  'adrive.com',
  'adroll.com',
  'adsafrica.co.za',
  'adsplatform.com',
  'adworkmedia.com',
  'adyou.me',
  'ahashare.com',
  'ahnegao.com.br',
  'airbnb.com',
  'alfresco.com',
  'alibabagroup.com',
  'alimama.com',
  'alipay.com',
  'alitrip.com',
  'allrecipes.co.uk',
  'alltechbuzz.net',
  'allusefulinfo.com',
  'alodokter.com',
  'ameblo.jp',
  'angelbroking.com',
  'anjuke.com',
  'aparat.com',
  'apastyle.org',
  'apiary.io',
  'appannie.com',
  'appcoda.com',
  'appcrawlr.com',
  'appgame.com',
  'applebees.com',
  'appone.com',
  'apunkagames.net',
  'arbitersports.com',
  'arcgis.com',
  'arcor-usercontent.de',
  'arseblog.com',
  'artstation.com',
  'asianfanfics.com',
  'ask.fm',
  'asp.net',
  'aspca.org',
  'astrology-zodiac-signs.com',
  'audioboom.com',
  'audioteka.com',
  'audiotool.com',
  'auspost.com.au',
  'auth0.com',
  'authorstream.com',
  'autotrader.com',
  'avaaz.org',
  'avangate.com',
  'avito.ru',
  'awm.com',
  'azquotes.com',
  'azure.com',
  'babytree.com',
  'backin.net',
  'backpage.com',
  'backstage.com',
  'badoo.com',
  'bangder.com',
  'basecamp.com',
  'bellazon.com',
  'bennadel.com',
  'bestforkodi.com',
  'bets.gg',
  'bgu.ac.il',
  'bigboobsalert.com',
  'bigcommerce.com',
  'biggerpockets.com',
  'billmoyers.com',
  'biostars.org',
  'bit-torrent.in',
  'bitauto.com',
  'bitbucket.org',
  'bitrix24.com',
  'bitshare.com',
  'bittorrent.com',
  'blobla.com',
  'blog.jp',
  'blogcu.com',
  'blogfa.com',
  'blogfree.net',
  'bloggersarena.com',
  'blogo.it',
  'blogs.com',
  'blogtalkradio.com',
  'blurb.com',
  'bniconnectglobal.com',
  'boards.net',
  'bolha.com',
  'books.com.tw',
  'bozhong.com',
  'brainly.com.br',
  'braintreepayments.com',
  'brainyquote.com',
  'brfiles.com',
  'brightcove.com',
  'bsesdelhi.com',
  'btcclicks.com',
  'btshoufa.net',
  'buffer.com',
  'bufferapp.com',
  'bugmenot.com',
  'businesscatalyst.com',
  'businesswritingblog.com',
  'bzw315.com',
  'calameo.com',
  'canadapost.ca',
  'canalblog.com',
  'canva.com',
  'careerbuilder.com',
  'cargocollective.com',
  'carto.com',
  'cb01.pw',
  'celebitchy.com',
  'centerblog.net',
  'cfd-online.com',
  'cgarchitect.com',
  'chandoo.org',
  'cheapassgamer.com',
  'chemicalbook.com',
  'cherrynudes.com',
  'chiphell.com',
  'chnlove.com',
  'cint.com',
  'claimbtc.com',
  'clickindia.com',
  'clicky.com',
  'clk.im',
  'cloudera.com',
  'cloudfile.co',
  'cloudup.com',
  'cloudy.ec',
  'cnblogs.com',
  'cocolog-nifty.com',
  'cocubes.com',
  'codechef.com',
  'codeguru.com',
  'codeplex.com',
  'coderwall.com',
  'codingame.com',
  'col3negoriginal.lk',
  'colfinancial.com',
  'collegescheduler.com',
  'colorlib.com',
  'colourlovers.com',
  'com-coupons.win',
  'commonhealth.com.tw',
  'confex.com',
  'convertkit.com',
  'cookieandkate.com',
  'cooks.com',
  'cooltest.me',
  'counter-strike.net',
  'cram.com',
  'crpfindia.com',
  'crunchbase.com',
  'csdn.net',
  'cssauthor.com',
  'cupofjo.com',
  'cwcjobs.com',
  'cwjobs.co.uk',
  'cybozu.com',
  'datemule.com',
  'dealdoktor.de',
  'dealnews.com',
  'deezer.com',
  'definitions-marketing.com',
  'depositfiles.com',
  'design-milk.com',
  'designbolts.com',
  'designyoutrust.com',
  'desirulez.me',
  'deutschepost.de',
  'deviantart.com',
  'dhl.de',
  'digitaldesire.com',
  'digitalocean.com',
  'digitizeindia.gov.in',
  'directrev.com',
  'disneymovierewards.go.com',
  'diytrade.com',
  'dlvrit.com',
  'docfoc.com',
  'dochub.com',
  'docker.com',
  'docs.com',
  'docsity.com',
  'dopa.com.cn',
  'dotnettips.info',
  'douyu.com',
  'driverscloud.com',
  'dropbox.com',
  'dumpaday.com',
  'duomai.com',
  'e-monsite.com',
  'easel.ly',
  'easy-firmware.com',
  'ecommerce-platforms.com',
  'economicsdiscussion.net',
  'edsby.com',
  'educatorstechnology.com',
  'eevblog.com',
  'egnyte.com',
  'elcomercio.com',
  'elearningindustry.com',
  'electronicshub.org',
  'electronicsinfoline.com',
  'elephantjournal.com',
  'elmenus.com',
  'empowernetwork.com',
  'enf-cmnf.com',
  'englishrussia.com',
  'enkivillage.com',
  'episodeinteractive.com',
  'epom.com',
  'erocurves.com',
  'erog.fr',
  'espaebook.com',
  'ethtrade.org',
  'etwinning.net',
  'evernote.com',
  'exacttarget.com',
  'examfear.com',
  'exblog.jp',
  'excite.co.jp',
  'excnn.xyz',
  'extraimage.net',
  'extratorrent.cc',
  'f1fanatic.co.uk',
  'fabric.io',
  'familyfriendpoems.com',
  'fanfiction.net',
  'fanli.com',
  'fanpop.com',
  'fapd.com',
  'fapdu.com',
  'farfetch.com',
  'farpost.ru',
  'fastmail.com',
  'fb.com',
  'fbcdn.net',
  'fc2.com',
  'fdating.com',
  'feedly.com',
  'feefo.com',
  'fefe.de',
  'file4go.net',
  'filefactory.com',
  'filemaker.com',
  'files.wordpress.com',
  'finanzen.net',
  'firestorage.jp',
  'flashcardmachine.com',
  'flatmates.com.au',
  'fleshbot.com',
  'flickr.com',
  'fling.com',
  'flipkey.com',
  'flocktory.com',
  'floralinvestment.com',
  'foobar2000.org',
  'footballstopten.com',
  'force.com',
  'forrester.com',
  'fortinet.com',
  'forumcommunity.net',
  'forums.wordpress.com',
  'freebiesbug.com',
  'freelibros.org',
  'freesteamkeys.me',
  'freshdesignweb.com',
  'fullhdfilmizlesene.org',
  'fullscreen.net',
  'fxpro.com',
  'gaana.com',
  'gamedev.net',
  'gametwist.com',
  'garena.co.id',
  'gdeposylka.ru',
  'geni.com',
  'getkahoot.com',
  'gfycat.com',
  'ghost.io',
  'ghost.org',
  'gimmesomeoven.com',
  'girlsaskguys.com',
  'gitter.im',
  'gjoyz.com',
  'glassdoor.ca',
  'glassdoor.co.in',
  'glassdoor.com',
  'gns3.com',
  'gnula.nu',
  'golbis.com',
  'gongchang.com',
  'gooyaabitemplates.com',
  'gopro.com',
  'gota.io',
  'gotomeet.me',
  'govjobadda.com',
  'grands-meres.net',
  'gry-online.pl',
  'gumtree.pl',
  'gumtree.sg',
  'gurushots.com',
  'hatena.ne.jp',
  'hatenablog.com',
  'hclips.com',
  'hellocoton.fr',
  'here.com',
  'heroku.com',
  'heroquizz.com',
  'highlow.net',
  'highrisehq.com',
  'hightail.com',
  'hitbox.tv',
  'hizliresim.com',
  'hk01.com',
  'holidify.com',
  'homedit.com',
  'hoobly.com',
  'hotcelebshome.com',
  'hotcopper.com.au',
  'hotschedules.com',
  'howtodoinjava.com',
  'hrloo.com',
  'ht.ly',
  'htpcbeginner.com',
  'hublaa.me',
  'hubspot.com',
  'hubspot.net',
  'huffpostmaghreb.com',
  'hulkload.com',
  'hypeness.com.br',
  'iamag.co',
  'iconarchive.com',
  'ieltsliz.com',
  'iemo.jp',
  'iezvu.com',
  'ifixit.com',
  'illuminateed.com',
  'imgbox.com',
  'imgchili.net',
  'imgserve.net',
  'impactradius.com',
  'indeed.co.in',
  'indesignsecrets.com',
  'indiainfoline.com',
  'indianhealthyrecipes.com',
  'indiapost.gov.in',
  'indulgy.com',
  'infogr.am',
  'instabam.gr',
  'intellego.fr',
  'internships.com',
  'invisionapp.com',
  'iqiyi.com',
  'ispot.news',
  'issuu.com',
  'isunshare.com',
  'italia-film.me',
  'itslearning.com',
  'iwriter.com',
  'janamtv.com',
  'japanpost.jp',
  'jav8.ml',
  'jimdo.com',
  'jiskha.com',
  'jkforum.net',
  'job-interview-site.com',
  'jobstreet.com',
  'jumia.com.eg',
  'jwplayer.com',
  'kahoot.it',
  'kaskus.co.id',
  'kat.how',
  'kataweb.it',
  'katfile.com',
  'keep2s.cc',
  'kicksonfire.com',
  'kickstarter.com',
  'klipfolio.com',
  'kmail-lists.com',
  'kotaksecurities.com',
  'koubei.com',
  'ksponline.co.in',
  'kununu.com',
  'lang-8.com',
  'leadpages.co',
  'leagueoflegends.com',
  'leanpub.com',
  'learnzillion.com',
  'leboncoin.fr',
  'leetchi.com',
  'lewebpedagogique.com',
  'librus.pl',
  'lineblog.me',
  'linkwithin.com',
  'litv.tv',
  'livedoor.jp',
  'livelib.ru',
  'lofter.com',
  'lomography.com',
  'ly.com',
  'lynk.my',
  'lyricsmode.com',
  'm-load.xyz',
  'm-w.com',
  'macdrug.com',
  'mail.gov.in',
  'makeupandbeauty.com',
  'mama.cn',
  'mamaclub.com',
  'managebuilding.com',
  'marketingweek.com',
  'mayoclinic.com',
  'mdc.edu',
  'media.tumblr.com',
  'mediafire.com',
  'mel.fm',
  'mercadolibre.com.ar',
  'mercadolivre.com.br',
  'meteor.com',
  'midomi.com',
  'mileroticos.com',
  'minds.com',
  'minecraftskins.com',
  'misya.info',
  'mixtape.moe',
  'mobafire.com',
  'mobygames.com',
  'moebel.de',
  'monstergulf.com',
  'monsterindia.com',
  'movescount.com',
  'mp3goo.com',
  'mql5.com',
  'mst.edu',
  'multcloud.com',
  'musical.ly',
  'myblog.it',
  'mycloud.com',
  'myfontfree.com',
  'myfreeshares.com',
  'mygov.in',
  'mylikes.com',
  'mynet.com',
  'myqnapcloud.com',
  'mytravelmap.tk',
  'myvidster.com',
  'naldzgraphics.net',
  'naointendo.com.br',
  'naukri.com',
  'naukrigulf.com',
  'netotrade.com',
  'netu.tv',
  'newgrounds.com',
  'nicovideo.jp',
  'nielit.gov.in',
  'ninjamarketing.it',
  'nisa2yat.com',
  'nitroflare.com',
  'niume.com',
  'no-mans-sky.com',
  'nobroker.in',
  'nouw.com',
  'novi.ba',
  'npupt.com',
  'nsfc.gov.cn',
  'nuget.org',
  'numbeo.com',
  'office.com',
  'officefootballpool.com',
  'officialpsds.com',
  'ok.ru',
  'olivesoftware.com',
  'olx.co.ao',
  'olx.com.pk',
  'olx.ph',
  'olx.pt',
  'onehallyu.com',
  'onet.pl',
  'oomall.com',
  'opensky.com',
  'opower.com',
  'optionshouse.com',
  'otakukart.com',
  'ouest-france.fr',
  'outbrain.com',
  'outlook.cn',
  'over-blog.com',
  'over-blog.fr',
  'ow.ly',
  'paigeeworld.com',
  'palmbeachpost.com',
  'pantip.com',
  'parenting.com.tw',
  'parsiblog.com',
  'paybox.com',
  'paypal.es',
  'payproglobal.com',
  'pbworks.com',
  'pearltrees.com',
  'peelink2.net',
  'peopleperhour.com',
  'phoenixads.co.in',
  'pianyuan.net',
  'picarto.tv',
  'picjoke.net',
  'pinchofyum.com',
  'pinoyexchange.com',
  'piwik.org',
  'pixieset.com',
  'pixiv.net',
  'pixnet.net',
  'pixsense.net',
  'plan.io',
  'planetcoaster.com',
  'playbuzz.com',
  'plays.tv',
  'playwire.com',
  'plot.ly',
  'pluralsight.com',
  'po.st',
  'podbean.com',
  'podomatic.com',
  'policybazaar.com',
  'polldaddy.com',
  'polycount.com',
  'popscreen.com',
  'popular-world.com',
  'poringa.net',
  'porlaputa.com',
  'pornsavant.com',
  'post.at',
  'post.ch',
  'postcron.com',
  'poste.it',
  'postplanner.com',
  'powerschool.com',
  'presonus.com',
  'prezi.com',
  'primecurves.com',
  'prottapp.com',
  'ptcwall.com',
  'publipt.com',
  'pulsk.com',
  'puu.sh',
  'qiita.com',
  'qq437.cn',
  'qualtrics.com',
  'qualys.com',
  'queezie.com',
  'quickmeme.com',
  'quicksurveys.com',
  'quikr.com',
  'quizalert.com',
  'quizlet.com',
  'quizyourfriends.com',
  'quotesgram.com',
  'qyer.com',
  'raaga.com',
  'rationalwiki.org',
  're-direcciona.me',
  'readwrite.com',
  'readzo.com',
  'realm.io',
  'redbus.in',
  'redmine.jp',
  'redtram.com',
  'reduceimages.com',
  'referralkey.com',
  'remita.net',
  'repelis.net',
  'repelis.tv',
  'researchgate.net',
  'researchmap.jp',
  'roblox.com',
  'rockfile.eu',
  'rumble.com',
  'ruten.com.tw',
  'safefinder.com',
  'salesforce.com',
  'salford.ac.uk',
  'salsalabs.com',
  'saludable.guru',
  'sandiegozoo.org',
  'sarkariexaam.com',
  'sarkariresults.net',
  'schooldude.com',
  'scotch.io',
  'scriptspot.com',
  'segmentfault.com',
  'sendlane.com',
  'sendowl.com',
  'serials.be',
  'serietvsubita.net',
  'sfasu.edu',
  'share-online.biz',
  'shareitdownloadapp.com',
  'sharepoint.com',
  'sharethis.com',
  'shobonnexus.com',
  'shopify.ca',
  'shopify.com',
  'showme.co.za',
  'shutterfly.com',
  'siap.web.id',
  'sigmabeauty.com',
  'signup.wordpress.com',
  'simfileshare.net',
  'simplymarry.com',
  'sina.com.cn',
  'sinaimg.cn',
  'siteground.com',
  'sitescout.com',
  'skillshare.com',
  'skyrock.com',
  'skyscrapercity.com',
  'sli.mg',
  'slide.ly',
  'slideboom.com',
  'slideplayer.com',
  'slideserve.com',
  'smallpdf.com',
  'smartrecruiters.com',
  'smarttech.com',
  'smilebox.com',
  'smite.guru',
  'smugmug.com',
  'snagajob.com',
  'snagshout.com',
  'socialtrade.biz',
  'socket.io',
  'solidfiles.com',
  'somewhereinblog.net',
  'soundcloud.com',
  'soup.io',
  'souq.com',
  'spareroom.co.uk',
  'speakerdeck.com',
  'spinrilla.com',
  'splashthat.com',
  'splunk.com',
  'spoongraphics.co.uk',
  'sprinklr.com',
  'sscsr.gov.in',
  'steadyhealth.com',
  'steamcommunity.com',
  'steampowered.com',
  'stillrealtous.com',
  'storify.com',
  'strongview.com',
  'studyblue.com',
  'subito.it',
  'supercounters.com',
  'superhq.net',
  'suprafiles.net',
  'sway.com',
  'sxx.com',
  'tableau.com',
  'tablondeanuncios.com',
  'taboola.com',
  'tamilmv.org',
  'tankiforum.com',
  'tarbiyah.net',
  'taringa.net',
  'tavolartegusto.it',
  'teamunify.com',
  'techapple.net',
  'techsmith.com',
  'telenordigital.com',
  'testosterona.blog.br',
  'tfc.tv',
  'thachpham.com',
  'thailandpost.co.th',
  'the-house.com',
  'thecable.ng',
  'thehollywoodgossip.com',
  'theoldreader.com',
  'thesocialpost.it',
  'thinkific.com',
  'thisav.com',
  'thisoldhouse.com',
  'thwglobal.com',
  'tianya.cn',
  'timesjobs.com',
  'tistory.com',
  'to8to.com',
  'toolslib.net',
  'trackingmore.com',
  'trak.in',
  'travis-ci.com',
  'trendingnewsportal.net.ph',
  'trialpay.com',
  'tricksforums.org',
  'trovit.com.br',
  'trucchifacebook.com',
  'trustpilot.com',
  'tsa.gov',
  'tsunagujapan.com',
  'tudou.com',
  'tumblr.com',
  'turbobit.net',
  'turboimagehost.com',
  'tusfiles.net',
  'tvbs.com.tw',
  'tvchaosuk.com',
  'twitch.tv',
  'twitlonger.com',
  'twoo.com',
  'txxx.com',
  'typekit.com',
  'typepad.com',
  'typo3.org',
  'ubuntu.com',
  'uduba.com',
  'umeng.com',
  'unisa.edu.au',
  'unity.com',
  'unity3d.com',
  'untappd.com',
  'unzipper.com',
  'uploaded.net',
  'uproxx.com',
  'usaudiobook.com',
  'userecho.com',
  'ushareit.com',
  'ustc.edu.cn',
  'venmo.com',
  'veoh.com',
  'veracross.com',
  'vid.me',
  'vidiq.com',
  'vidup.me',
  'vimeo.com',
  'visual.ly',
  'visualstudio.com',
  'vivastreet.co.in',
  'vivo.sx',
  'vlan.be',
  'vmall.com',
  'vocaroo.com',
  'vosizneias.com',
  'vt.tumblr.com',
  'warframe-builder.com',
  'wattpad.com',
  'waves.com',
  'wbsscregistration.nic.in',
  'webcamtoy.com',
  'webinarjam.net',
  'websitewelcome.com',
  'weddingbee.com',
  'weebly.com',
  'weezevent.com',
  'weheartit.com',
  'weibo.com',
  'wevideo.com',
  'whicdn.com',
  'wikiloc.com',
  'wittyfeed.com',
  'wix.com',
  'wixsite.com',
  'wiziq.com',
  'wolfram.com',
  'wolrdssl.net',
  'woocommerce.com',
  'woothemes.com',
  'wordpress.com',
  'wp.com',
  'wpformation.com',
  'wtffunfact.com',
  'xender.com',
  'xitu.io',
  'xpg.uol.com.br',
  'xtremepapers.com',
  'xuite.net',
  'yinxiang.com',
  'youcaring.com',
  'youramateurporn.com',
  'yourarticlelibrary.com',
  'yourbittorrent.com',
  'yourstory.com',
  'yout.com',
  'youtube-mp3.org',
  'yugster.com',
  'yumpu.com',
  'zedo.com',
  'zenius.net',
  'zhihu.com',
  'zillow.com',
  'znanija.com',
  'zoho.com.cn',
  'zoom.us',
  'zoominfo.com',
  'zotero.org'
]

const regexpEscape = function (s) { return s.replace(/[-\/\\^$*+?.()|[\]{}]/g, '\\$&') }

module.exports = {
  retrieve: function (cb) {
    cb(null, platformsSLD.concat(platforms))
  },

  build: function (cb) {
    const transformedList = platforms.map((item) => { return `'${item}'` }).join(', ')
    var condition = `(new Set([ ${transformedList} ])).has(SLD.split('.')[0])`
    platformsSLD.forEach(function (SLD) {
      condition += ' || /' + regexpEscape(SLD) + '$/.test(SLD)'
    })

    const rule = {
      condition: condition,
      consequent: null,
      description: 'exclude platforms'
    }
    cb(null, rule)
  }
}
